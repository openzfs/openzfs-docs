

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Message ID: ZFS-8000-K4 &mdash; OpenZFS  documentation</title>
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/mandoc.css" type="text/css" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
      <script src="../../_static/doctools.js?v=888ff710"></script>
      <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="License" href="../../License.html" />
    <link rel="prev" title="Message ID: ZFS-8000-JQ" href="../ZFS-8000-JQ/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #29667e" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo_main.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Getting%20Started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Project%20and%20Community/index.html">Project and Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer%20Resources/index.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Performance%20and%20Tuning/index.html">Performance and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Basic%20Concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../man/index.html">Man Pages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">ZFS Messages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-14/index.html">Message ID: ZFS-8000-14</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-2Q/index.html">Message ID: ZFS-8000-2Q</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-3C/index.html">Message ID: ZFS-8000-3C</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-4J/index.html">Message ID: ZFS-8000-4J</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-5E/index.html">Message ID: ZFS-8000-5E</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-6X/index.html">Message ID: ZFS-8000-6X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-72/index.html">Message ID: ZFS-8000-72</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-8A/index.html">Message ID: ZFS-8000-8A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-9P/index.html">Message ID: ZFS-8000-9P</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-A5/index.html">Message ID: ZFS-8000-A5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-ER/index.html">Message ID: ZFS-8000-ER</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-EY/index.html">Message ID: ZFS-8000-EY</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-HC/index.html">Message ID: ZFS-8000-HC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ZFS-8000-JQ/index.html">Message ID: ZFS-8000-JQ</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Message ID: ZFS-8000-K4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#zfs-intent-log-read-failure">ZFS intent log read failure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../License.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #29667e" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OpenZFS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">ZFS Messages</a></li>
      <li class="breadcrumb-item active">Message ID: ZFS-8000-K4</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/openzfs/openzfs-docs/blob/master/docs/msg/ZFS-8000-K4/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="message-id-zfs-8000-k4">
<h1>Message ID: ZFS-8000-K4<a class="headerlink" href="#message-id-zfs-8000-k4" title="Permalink to this heading"></a></h1>
<section id="zfs-intent-log-read-failure">
<h2>ZFS intent log read failure<a class="headerlink" href="#zfs-intent-log-read-failure" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Type:</strong></p></td>
<td><p>Error</p></td>
</tr>
<tr class="row-even"><td><p><strong>Severity:</strong></p></td>
<td><p>Major</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Description:</strong></p></td>
<td><p>A ZFS intent log device could not be read.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Automated Response:</strong></p></td>
<td><p>No automated response will be taken.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Impact:</strong></p></td>
<td><p>The intent log(s) cannot be replayed.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Suggested Action for System Administrator</p>
<p>A ZFS intent log record could not be read due to an error.  This may
be due to a missing or broken log device, or a device within the pool
may be experiencing I/O errors.  The pool itself is not corrupt but is
missing some pool changes that happened shortly before a power loss
or system failure.  These are pool changes that applications had
requested to be written synchronously but had not been committed in
the pool.  This transaction group commit currently occurs every five
seconds, and so typically at most five seconds worth of synchronous
writes have been lost.  ZFS itself cannot determine if the pool
changes lost are critical to those applications running at the time
of the system failure.  This is a decision the administrator must
make.  You may want to consider mirroring log devices.  First determine
which pool is in error:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># zpool status -x
  pool: test
 state: FAULTED
status: One or more of the intent logs could not be read.
        Waiting for administrator intervention to fix the faulted pool.
action: Either restore the affected device(s) and run &#39;zpool online&#39;,
        or ignore the intent log records by running &#39;zpool clear&#39;.
 scrub: none requested
config:

        NAME              STATE     READ WRITE CKSUM
        test              FAULTED      0     0     0  bad intent log
          c3t2d0          ONLINE       0     0     0
        logs              FAULTED      0     0     0  bad intent log
          c5t3d0          UNAVAIL      0     0     0  cannot open
</pre></div>
</div>
<p>There are two courses of action to resolve this problem.
If the validity of the pool from an application perspective requires
the pool changes then the log devices must be recovered.  Make sure
power and cables are connected and that the affected device is
online.  Then run <code class="docutils literal notranslate"><span class="pre">zpool</span> <span class="pre">online</span></code> and then <code class="docutils literal notranslate"><span class="pre">zpool</span> <span class="pre">clear</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># zpool online test c5t3d0
# zpool clear test
# zpool status test
  pool: test
 state: ONLINE
 scrub: none requested
config:

        NAME              STATE     READ WRITE CKSUM
        test              ONLINE       0     0     0
          c3t2d0          ONLINE       0     0     0
        logs              ONLINE       0     0     0
          c5t3d0          ONLINE       0     0     0

errors: No known data errors
</pre></div>
</div>
<p>The second alternative action is to ignore the most recent pool
changes that could not be read.  To do this run <code class="docutils literal notranslate"><span class="pre">zpool</span> <span class="pre">clear</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># zpool clear test
# zpool status test
  pool: test
 state: DEGRADED
status: One or more devices could not be opened.  Sufficient replicas exist for
        the pool to continue functioning in a degraded state.
action: Attach the missing device and online it using &#39;zpool online&#39;.
   see: https://openzfs.github.io/openzfs-docs/msg/ZFS-8000-2Q
 scrub: none requested
config:

        NAME              STATE     READ WRITE CKSUM
        test              DEGRADED     0     0     0
          c3t2d0          ONLINE       0     0     0
        logs              DEGRADED     0     0     0
          c5t3d0          UNAVAIL      0     0     0  cannot open

errors: No known data errors
</pre></div>
</div>
<p>Future log records will not use a failed log device but will be
written to the main pool.  You should fix or replace any failed log
devices.</p>
<p class="rubric">Details</p>
<p>The Message ID: <code class="docutils literal notranslate"><span class="pre">ZFS-8000-K4</span></code> indicates that a log device is
missing or cannot be read.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../ZFS-8000-JQ/index.html" class="btn btn-neutral float-left" title="Message ID: ZFS-8000-JQ" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../License.html" class="btn btn-neutral float-right" title="License" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, OpenZFS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>