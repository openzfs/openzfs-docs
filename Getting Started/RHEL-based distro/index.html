

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RHEL-based distro &mdash; OpenZFS  documentation</title>
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/mandoc.css" type="text/css" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
      <script src="../../_static/doctools.js?v=888ff710"></script>
      <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Rocky Linux Root on ZFS" href="Root%20on%20ZFS.html" />
    <link rel="prev" title="openSUSE Tumbleweed Root on ZFS" href="../openSUSE/openSUSE%20Tumbleweed%20Root%20on%20ZFS.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #29667e" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo_main.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Alpine%20Linux/index.html">Alpine Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Arch%20Linux/index.html">Arch Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Debian/index.html">Debian</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Fedora/index.html">Fedora</a></li>
<li class="toctree-l2"><a class="reference internal" href="../FreeBSD.html">FreeBSD</a></li>
<li class="toctree-l2"><a class="reference external" href="https://wiki.gentoo.org/wiki/ZFS">Gentoo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../NixOS/index.html">NixOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../openSUSE/index.html">openSUSE</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">RHEL-based distro</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#contents">Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Root%20on%20ZFS.html">Rocky Linux Root on ZFS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dkms">DKMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kabi-tracking-kmod">kABI-tracking kmod</a></li>
<li class="toctree-l3"><a class="reference internal" href="#previous-minor-el-releases">Previous minor EL releases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-repositories">Testing Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#root-on-zfs">Root on ZFS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Root%20on%20ZFS.html">Rocky Linux Root on ZFS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Slackware/index.html">Slackware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Ubuntu/index.html">Ubuntu</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Project%20and%20Community/index.html">Project and Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer%20Resources/index.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Performance%20and%20Tuning/index.html">Performance and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Basic%20Concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../man/index.html">Man Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../msg/index.html">ZFS Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../License.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #29667e" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OpenZFS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Getting Started</a></li>
      <li class="breadcrumb-item active">RHEL-based distro</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/openzfs/openzfs-docs/blob/master/docs/Getting Started/RHEL-based distro/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rhel-based-distro">
<h1>RHEL-based distro<a class="headerlink" href="#rhel-based-distro" title="Permalink to this heading"></a></h1>
<section id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Root%20on%20ZFS.html">Rocky Linux Root on ZFS</a></li>
</ul>
</div>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support">DKMS</a> and <a class="reference external" href="https://elrepoproject.blogspot.com/2016/02/kabi-tracking-kmod-packages.html">kABI-tracking kmod</a> style packages are provided for x86_64 RHEL-
and CentOS-based distributions from the OpenZFS repository.  These packages
are updated as new versions are released.  Only the repository for the current
minor version of each current major release is updated with new packages.</p>
<p>To simplify installation, a <em>zfs-release</em> package is provided which includes
a zfs.repo configuration file and public signing key. All official OpenZFS
packages are signed using this key, and by default yum or dnf will verify a
package’s signature before allowing it be to installed. Users are strongly
encouraged to verify the authenticity of the OpenZFS public key using
the fingerprint listed here.</p>
<div class="line-block">
<div class="line"><strong>Key location:</strong> /etc/pki/rpm-gpg/RPM-GPG-KEY-openzfs (previously -zfsonlinux)</div>
<div class="line"><strong>Current release packages:</strong> <a class="reference external" href="https://zfsonlinux.org/epel/zfs-release-2-3.el7.noarch.rpm">EL7</a>, <a class="reference external" href="https://zfsonlinux.org/epel/zfs-release-2-3.el8.noarch.rpm">EL8</a>, <a class="reference external" href="https://zfsonlinux.org/epel/zfs-release-2-3.el9.noarch.rpm">EL9</a></div>
<div class="line"><strong>Archived release packages:</strong> <a class="reference external" href="https://github.com/zfsonlinux/zfsonlinux.github.com/tree/master/epel">see repo page</a></div>
</div>
<div class="line-block">
<div class="line"><strong>Signing key1 (EL8 and older, Fedora 36 and older)</strong>
<a class="reference external" href="https://pgp.mit.edu/pks/lookup?search=0xF14AB620&amp;op=index&amp;fingerprint=on">pgp.mit.edu</a> /
<a class="reference external" href="https://raw.githubusercontent.com/zfsonlinux/zfsonlinux.github.com/master/zfs-release/RPM-GPG-KEY-openzfs-key1">direct link</a></div>
<div class="line"><strong>Fingerprint:</strong> C93A FFFD 9F3F 7B03 C310 CEB6 A9D5 A1C0 F14A B620</div>
</div>
<div class="line-block">
<div class="line"><strong>Signing key2 (EL9+, Fedora 37+)</strong>
<a class="reference external" href="https://pgp.mit.edu/pks/lookup?search=0xA599FD5E9DB84141&amp;op=index&amp;fingerprint=on">pgp.mit.edu</a> /
<a class="reference external" href="https://raw.githubusercontent.com/zfsonlinux/zfsonlinux.github.com/master/zfs-release/RPM-GPG-KEY-openzfs-key2">direct link</a></div>
<div class="line"><strong>Fingerprint:</strong> 7DC7 299D CF7C 7FD9 CD87 701B A599 FD5E 9DB8 4141</div>
</div>
<p>For EL 7 run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>yum install https://zfsonlinux.org/epel/zfs-release-2-3$(rpm --eval &quot;%{dist}&quot;).noarch.rpm
</pre></div>
</div>
<p>and for EL 8-10:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>dnf install https://zfsonlinux.org/epel/zfs-release-2-8$(rpm --eval &quot;%{dist}&quot;).noarch.rpm
</pre></div>
</div>
<p>After installing the <em>zfs-release</em> package and verifying the public key
users can opt to install either the DKMS or kABI-tracking kmod style packages.
DKMS packages are recommended for users running a non-distribution kernel or
for users who wish to apply local customizations to OpenZFS.  For most users
the kABI-tracking kmod packages are recommended in order to avoid needing to
rebuild OpenZFS for every kernel update.</p>
</section>
<section id="dkms">
<h2>DKMS<a class="headerlink" href="#dkms" title="Permalink to this heading"></a></h2>
<p>To install DKMS style packages issue the following commands. First add the
<a class="reference external" href="https://fedoraproject.org/wiki/EPEL">EPEL repository</a> which provides DKMS by installing the <em>epel-release</em>
package, then the <em>kernel-devel</em> and <em>zfs</em> packages. Note that it is
important to make sure that the matching <em>kernel-devel</em> package is installed
for the running kernel since DKMS requires it to build OpenZFS.</p>
<p>For EL6 and 7, separately run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">epel</span><span class="o">-</span><span class="n">release</span>
<span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">kernel</span><span class="o">-</span><span class="n">devel</span>
<span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">zfs</span>
</pre></div>
</div>
<p>And for EL8 and newer, separately run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">epel</span><span class="o">-</span><span class="n">release</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">kernel</span><span class="o">-</span><span class="n">devel</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">zfs</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When switching from DKMS to kABI-tracking kmods first uninstall the
existing DKMS packages. This should remove the kernel modules for all
installed kernels, then the kABI-tracking kmods can be installed as
described in the section below.</p>
</div>
</section>
<section id="kabi-tracking-kmod">
<h2>kABI-tracking kmod<a class="headerlink" href="#kabi-tracking-kmod" title="Permalink to this heading"></a></h2>
<p>By default the <em>zfs-release</em> package is configured to install DKMS style
packages so they will work with a wide range of kernels. In order to
install the kABI-tracking kmods the default repository must be switched
from <em>zfs</em> to <em>zfs-kmod</em>. Keep in mind that the kABI-tracking kmods are
only verified to work with the distribution-provided, non-Stream kernel.</p>
<p>For EL6 and 7 run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="n">disable</span> <span class="n">zfs</span>
<span class="n">yum</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="n">enable</span> <span class="n">zfs</span><span class="o">-</span><span class="n">kmod</span>
<span class="n">yum</span> <span class="n">install</span> <span class="n">zfs</span>
</pre></div>
</div>
<p>And for EL8 and newer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="n">disable</span> <span class="n">zfs</span>
<span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="n">enable</span> <span class="n">zfs</span><span class="o">-</span><span class="n">kmod</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">zfs</span>
</pre></div>
</div>
<p>By default the OpenZFS kernel modules are automatically loaded when a ZFS
pool is detected. If you would prefer to always load the modules at boot
time you can create such configuration in <code class="docutils literal notranslate"><span class="pre">/etc/modules-load.d</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="n">zfs</span> <span class="o">&gt;/</span><span class="n">etc</span><span class="o">/</span><span class="n">modules</span><span class="o">-</span><span class="n">load</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">zfs</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When updating to a new EL minor release the existing kmod
packages may not work due to upstream kABI changes in the kernel.
The configuration of the current release package may have already made an
updated package available, but the package manager may not know to install
that package if the version number isn’t newer.  When upgrading, users
should verify that the <em>kmod-zfs</em> package is providing suitable kernel
modules, reinstalling the <em>kmod-zfs</em> package if necessary.</p>
</div>
</section>
<section id="previous-minor-el-releases">
<h2>Previous minor EL releases<a class="headerlink" href="#previous-minor-el-releases" title="Permalink to this heading"></a></h2>
<p>The current release package uses <cite>“${releasever}”</cite> rather than specify a particular
minor release as previous release packages did.  Typically <cite>“${releasever}”</cite> will
resolve to just the major version (e.g. <cite>8</cite>), and the resulting repository URL
will be aliased to the current minor version (e.g. <cite>8.7</cite>), but you can specify
<cite>–releasever</cite> to use previous repositories.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[vagrant@localhost ~]$ dnf list available --showduplicates kmod-zfs
Last metadata expiration check: 0:00:08 ago on tor 31 jan 2023 17:50:05 UTC.
Available Packages
kmod-zfs.x86_64                          2.1.6-1.el8                          zfs-kmod
kmod-zfs.x86_64                          2.1.7-1.el8                          zfs-kmod
kmod-zfs.x86_64                          2.1.8-1.el8                          zfs-kmod
kmod-zfs.x86_64                          2.1.9-1.el8                          zfs-kmod
[vagrant@localhost ~]$ dnf list available --showduplicates --releasever=8.6 kmod-zfs
Last metadata expiration check: 0:16:13 ago on tor 31 jan 2023 17:34:10 UTC.
Available Packages
kmod-zfs.x86_64                          2.1.4-1.el8                          zfs-kmod
kmod-zfs.x86_64                          2.1.5-1.el8                          zfs-kmod
kmod-zfs.x86_64                          2.1.5-2.el8                          zfs-kmod
kmod-zfs.x86_64                          2.1.6-1.el8                          zfs-kmod
[vagrant@localhost ~]$
</pre></div>
</div>
<p>In the above example, the former packages were built for EL8.7, and the latter for EL8.6.</p>
</section>
<section id="testing-repositories">
<h2>Testing Repositories<a class="headerlink" href="#testing-repositories" title="Permalink to this heading"></a></h2>
<p>In addition to the primary <em>zfs</em> repository a <em>zfs-testing</em> repository
is available. This repository, which is disabled by default, contains
the latest version of OpenZFS which is under active development. These
packages are made available in order to get feedback from users regarding
the functionality and stability of upcoming releases. These packages
<strong>should not</strong> be used on production systems. Packages from the testing
repository can be installed as follows.</p>
<p>For EL6 and 7 run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="n">enable</span> <span class="n">zfs</span><span class="o">-</span><span class="n">testing</span>
<span class="n">yum</span> <span class="n">install</span> <span class="n">kernel</span><span class="o">-</span><span class="n">devel</span> <span class="n">zfs</span>
</pre></div>
</div>
<p>And for EL8 and newer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="n">enable</span> <span class="n">zfs</span><span class="o">-</span><span class="n">testing</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">kernel</span><span class="o">-</span><span class="n">devel</span> <span class="n">zfs</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use <em>zfs-testing</em> for DKMS packages and <em>zfs-testing-kmod</em>
for kABI-tracking kmod packages.</p>
</div>
</section>
<section id="root-on-zfs">
<h2>Root on ZFS<a class="headerlink" href="#root-on-zfs" title="Permalink to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Root%20on%20ZFS.html">Rocky Linux Root on ZFS</a></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../openSUSE/openSUSE%20Tumbleweed%20Root%20on%20ZFS.html" class="btn btn-neutral float-left" title="openSUSE Tumbleweed Root on ZFS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Root%20on%20ZFS.html" class="btn btn-neutral float-right" title="Rocky Linux Root on ZFS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, OpenZFS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>