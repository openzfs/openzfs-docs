ZFS-PROMOTE(8) - System Manager's Manual

# NAME

**zfs-promote** - promote clone dataset to no longer depend on origin snapshot

# SYNOPSIS

**zfs**
**promote**
*clone*

# DESCRIPTION

The
**zfs** **promote**
command makes it possible to destroy the dataset that the clone was created
from.
The clone parent-child dependency relationship is reversed, so that the origin
dataset becomes a clone of the specified dataset.

The snapshot that was cloned, and any snapshots previous to this snapshot, are
now owned by the promoted clone.
The space they use moves from the origin dataset to the promoted clone, so
enough space must be available to accommodate these snapshots.
No new space is consumed by this operation, but the space accounting is
adjusted.
The promoted clone must not have any conflicting snapshot names of its own.
The
**zfs** **rename**
subcommand can be used to rename any conflicting snapshots.

# EXAMPLES

## Example 1: Promoting a ZFS Clone

The following commands illustrate how to test out changes to a file system, and
then replace the original file system with the changed one, using clones, clone
promotion, and renaming:

	# **zfs** **create** *pool/project/production*
	  populate /pool/project/production with data
	# **zfs** **snapshot** *pool/project/production*@*today*
	# **zfs** **clone** *pool/project/production@today pool/project/beta*
	  make changes to /pool/project/beta and test them
	# **zfs** **promote** *pool/project/beta*
	# **zfs** **rename** *pool/project/production pool/project/legacy*
	# **zfs** **rename** *pool/project/beta pool/project/production*
	  once the legacy version is no longer needed, it can be destroyed
	# **zfs** **destroy** *pool/project/legacy*

# SEE ALSO

zfs-clone(8),
zfs-rename(8)

Debian - July 11, 2022
