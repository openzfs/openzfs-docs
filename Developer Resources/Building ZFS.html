

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Building ZFS &mdash; OpenZFS  documentation</title>
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/mandoc.css" type="text/css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Git and GitHub for beginners (ZoL edition)" href="Git%20and%20GitHub%20for%20beginners.html" />
    <link rel="prev" title="Custom Packages" href="Custom%20Packages.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #29667e" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo_main.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Getting%20Started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Project%20and%20Community/index.html">Project and Community</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Resources</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Custom%20Packages.html">Custom Packages</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building ZFS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#github-repositories">GitHub Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-dependencies">Installing Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-options">Build Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#developing-in-tree">Developing In-Tree</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clone-from-github">Clone from GitHub</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-and-build">Configure and Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install">Install</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-zloop-sh-and-zfs-tests-sh">Running zloop.sh and zfs-tests.sh</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://openzfs.org/wiki/Developer_resources">OpenZFS Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Git%20and%20GitHub%20for%20beginners.html">Git and GitHub for beginners (ZoL edition)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Performance%20and%20Tuning/index.html">Performance and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Basic%20Concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../man/index.html">Man Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../msg/index.html">ZFS Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../License.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #29667e" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OpenZFS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Developer Resources</a></li>
      <li class="breadcrumb-item active">Building ZFS</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/openzfs/openzfs-docs/blob/master/docs/Developer Resources/Building ZFS.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="building-zfs">
<h1>Building ZFS<a class="headerlink" href="#building-zfs" title="Permalink to this heading"></a></h1>
<section id="github-repositories">
<h2>GitHub Repositories<a class="headerlink" href="#github-repositories" title="Permalink to this heading"></a></h2>
<p>The official source for OpenZFS is maintained at GitHub by the
<a class="reference external" href="https://github.com/openzfs/">openzfs</a> organization. The primary
git repository for the project is the <a class="reference external" href="https://github.com/openzfs/zfs">zfs</a> repository.</p>
<p>There are two main components in this repository:</p>
<ul class="simple">
<li><p><strong>ZFS</strong>: The ZFS repository contains a copy of the upstream OpenZFS
code which has been adapted and extended for Linux and FreeBSD. The
vast majority of the core OpenZFS code is self-contained and can be
used without modification.</p></li>
<li><p><strong>SPL</strong>: The SPL is a thin shim layer which is responsible for
implementing the fundamental interfaces required by OpenZFS. It’s
this layer which allows OpenZFS to be used across multiple
platforms. SPL used to be maintained in a separate repository, but
was merged into the <a class="reference external" href="https://github.com/openzfs/zfs">zfs</a>
repository in the <code class="docutils literal notranslate"><span class="pre">0.8</span></code> major release.</p></li>
</ul>
</section>
<section id="installing-dependencies">
<h2>Installing Dependencies<a class="headerlink" href="#installing-dependencies" title="Permalink to this heading"></a></h2>
<p>The first thing you’ll need to do is prepare your environment by
installing a full development tool chain. In addition, development
headers for both the kernel and the following packages must be
available. It is important to note that if the development kernel
headers for the currently running kernel aren’t installed, the modules
won’t compile properly.</p>
<p>The following dependencies should be installed to build the latest ZFS
2.1 release.</p>
<ul class="simple">
<li><p><strong>RHEL/CentOS 7</strong>:</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>epel-release<span class="w"> </span>gcc<span class="w"> </span>make<span class="w"> </span>autoconf<span class="w"> </span>automake<span class="w"> </span>libtool<span class="w"> </span>rpm-build<span class="w"> </span>libtirpc-devel<span class="w"> </span>libblkid-devel<span class="w"> </span>libuuid-devel<span class="w"> </span>libudev-devel<span class="w"> </span>openssl-devel<span class="w"> </span>zlib-devel<span class="w"> </span>libaio-devel<span class="w"> </span>libattr-devel<span class="w"> </span>elfutils-libelf-devel<span class="w"> </span>kernel-devel-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="w"> </span>python<span class="w"> </span>python2-devel<span class="w"> </span>python-setuptools<span class="w"> </span>python-cffi<span class="w"> </span>libffi-devel<span class="w"> </span>git<span class="w"> </span>ncompress<span class="w"> </span>libcurl-devel
sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>--enablerepo<span class="o">=</span>epel<span class="w"> </span>python-packaging<span class="w"> </span>dkms
</pre></div>
</div>
<ul class="simple">
<li><p><strong>RHEL/CentOS 8, Fedora</strong>:</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>--skip-broken<span class="w"> </span>epel-release<span class="w"> </span>gcc<span class="w"> </span>make<span class="w"> </span>autoconf<span class="w"> </span>automake<span class="w"> </span>libtool<span class="w"> </span>rpm-build<span class="w"> </span>libtirpc-devel<span class="w"> </span>libblkid-devel<span class="w"> </span>libuuid-devel<span class="w"> </span>libudev-devel<span class="w"> </span>openssl-devel<span class="w"> </span>zlib-devel<span class="w"> </span>libaio-devel<span class="w"> </span>libattr-devel<span class="w"> </span>elfutils-libelf-devel<span class="w"> </span>kernel-devel-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="w"> </span>python3<span class="w"> </span>python3-devel<span class="w"> </span>python3-setuptools<span class="w"> </span>python3-cffi<span class="w"> </span>libffi-devel<span class="w"> </span>git<span class="w"> </span>ncompress<span class="w"> </span>libcurl-devel
sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>--skip-broken<span class="w"> </span>--enablerepo<span class="o">=</span>epel<span class="w"> </span>--enablerepo<span class="o">=</span>powertools<span class="w"> </span>python3-packaging<span class="w"> </span>dkms
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Debian, Ubuntu</strong>:</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>alien<span class="w"> </span>autoconf<span class="w"> </span>automake<span class="w"> </span>build-essential<span class="w"> </span>debhelper-compat<span class="w"> </span>dh-autoreconf<span class="w"> </span>dh-dkms<span class="w"> </span>dh-python<span class="w"> </span>dkms<span class="w"> </span>fakeroot<span class="w"> </span>gawk<span class="w"> </span>git<span class="w"> </span>libaio-dev<span class="w"> </span>libattr1-dev<span class="w"> </span>libblkid-dev<span class="w"> </span>libcurl4-openssl-dev<span class="w"> </span>libelf-dev<span class="w"> </span>libffi-dev<span class="w"> </span>libpam0g-dev<span class="w"> </span>libssl-dev<span class="w"> </span>libtirpc-dev<span class="w"> </span>libtool<span class="w"> </span>libudev-dev<span class="w"> </span>linux-headers-generic<span class="w"> </span>parallel<span class="w"> </span>po-debconf<span class="w"> </span>python3<span class="w"> </span>python3-all-dev<span class="w"> </span>python3-cffi<span class="w"> </span>python3-dev<span class="w"> </span>python3-packaging<span class="w"> </span>python3-setuptools<span class="w"> </span>python3-sphinx<span class="w"> </span>uuid-dev<span class="w"> </span>zlib1g-dev
</pre></div>
</div>
<ul class="simple">
<li><p><strong>FreeBSD</strong>:</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pkg<span class="w"> </span>install<span class="w"> </span>autoconf<span class="w"> </span>automake<span class="w"> </span>autotools<span class="w"> </span>git<span class="w"> </span>gmake<span class="w"> </span>python<span class="w"> </span>devel/py-sysctl<span class="w"> </span>sudo
</pre></div>
</div>
</section>
<section id="build-options">
<h2>Build Options<a class="headerlink" href="#build-options" title="Permalink to this heading"></a></h2>
<p>There are two options for building OpenZFS; the correct one largely
depends on your requirements.</p>
<ul class="simple">
<li><p><strong>Packages</strong>: Often it can be useful to build custom packages from
git which can be installed on a system. This is the best way to
perform integration testing with systemd, dracut, and udev. The
downside to using packages it is greatly increases the time required
to build, install, and test a change.</p></li>
<li><p><strong>In-tree</strong>: Development can be done entirely in the SPL/ZFS source
tree. This speeds up development by allowing developers to rapidly
iterate on a patch. When working in-tree developers can leverage
incremental builds, load/unload kernel modules, execute utilities,
and verify all their changes with the ZFS Test Suite.</p></li>
</ul>
<p>The remainder of this page focuses on the <strong>in-tree</strong> option which is
the recommended method of development for the majority of changes. See
the <a class="reference internal" href="Custom%20Packages.html"><span class="doc">custom packages</span></a> page for additional
information on building custom packages.</p>
</section>
<section id="developing-in-tree">
<h2>Developing In-Tree<a class="headerlink" href="#developing-in-tree" title="Permalink to this heading"></a></h2>
<section id="clone-from-github">
<h3>Clone from GitHub<a class="headerlink" href="#clone-from-github" title="Permalink to this heading"></a></h3>
<p>Start by cloning the ZFS repository from GitHub. The repository has a
<strong>master</strong> branch for development and a series of <strong>*-release</strong>
branches for tagged releases. After checking out the repository your
clone will default to the master branch. Tagged releases may be built
by checking out zfs-x.y.z tags with matching version numbers or
matching release branches.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openzfs</span><span class="o">/</span><span class="n">zfs</span>
</pre></div>
</div>
</section>
<section id="configure-and-build">
<h3>Configure and Build<a class="headerlink" href="#configure-and-build" title="Permalink to this heading"></a></h3>
<p>For developers working on a change always create a new topic branch
based off of master. This will make it easy to open a pull request with
your change latter. The master branch is kept stable with extensive
<a class="reference external" href="http://build.zfsonlinux.org/">regression testing</a> of every pull
request before and after it’s merged. Every effort is made to catch
defects as early as possible and to keep them out of the tree.
Developers should be comfortable frequently rebasing their work against
the latest master branch.</p>
<p>In this example we’ll use the master branch and walk through a stock
<strong>in-tree</strong> build. Start by checking out the desired branch then build
the ZFS and SPL source in the traditional autotools fashion.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd ./zfs
git checkout master
sh autogen.sh
./configure
make -s -j$(nproc)
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>tip:</strong> <code class="docutils literal notranslate"><span class="pre">--with-linux=PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">--with-linux-obj=PATH</span></code> can be
passed to configure to specify a kernel installed in a non-default
location.</div>
<div class="line"><strong>tip:</strong> <code class="docutils literal notranslate"><span class="pre">--enable-debug</span></code> can be passed to configure to enable all ASSERTs and
additional correctness tests.</div>
</div>
<p><strong>Optional</strong> Build packages</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">rpm</span> <span class="c1">#Builds RPM packages for CentOS/Fedora</span>
<span class="n">make</span> <span class="n">deb</span> <span class="c1">#Builds RPM converted DEB packages for Debian/Ubuntu</span>
<span class="n">make</span> <span class="n">native</span><span class="o">-</span><span class="n">deb</span> <span class="c1">#Builds native DEB packages for Debian/Ubuntu</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>tip:</strong> Native Debian packages build with pre-configured paths for
Debian and Ubuntu. It’s best not to override the paths during
configure.</div>
<div class="line"><strong>tip:</strong> For native Debian packages, <code class="docutils literal notranslate"><span class="pre">KVERS</span></code>, <code class="docutils literal notranslate"><span class="pre">KSRC</span></code> and <code class="docutils literal notranslate"><span class="pre">KOBJ</span></code>
environment variables can be exported to specify the kernel installed
in non-default location.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Support for native Debian packaging will be available starting from
openzfs-2.2 release.</p>
</div>
</section>
<section id="install">
<h3>Install<a class="headerlink" href="#install" title="Permalink to this heading"></a></h3>
<p>You can run <code class="docutils literal notranslate"><span class="pre">zfs-tests.sh</span></code> without installing ZFS, see below. If you
have reason to install ZFS after building it, pay attention to how your
distribution handles kernel modules. On Ubuntu, for example, the modules
from this repository install in the <code class="docutils literal notranslate"><span class="pre">extra</span></code> kernel module path, which
is not in the standard <code class="docutils literal notranslate"><span class="pre">depmod</span></code> search path. Therefore, for the
duration of your testing, edit <code class="docutils literal notranslate"><span class="pre">/etc/depmod.d/ubuntu.conf</span></code> and add
<code class="docutils literal notranslate"><span class="pre">extra</span></code> to the beginning of the search path.</p>
<p>You may then install using
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">make</span> <span class="pre">install;</span> <span class="pre">sudo</span> <span class="pre">ldconfig;</span> <span class="pre">sudo</span> <span class="pre">depmod</span></code>. You’d uninstall with
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">make</span> <span class="pre">uninstall;</span> <span class="pre">sudo</span> <span class="pre">ldconfig;</span> <span class="pre">sudo</span> <span class="pre">depmod</span></code>. You can install just
the kernel modules with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">make</span> <span class="pre">-C</span> <span class="pre">modules/</span> <span class="pre">install</span></code>.</p>
</section>
<section id="running-zloop-sh-and-zfs-tests-sh">
<span id="running-zloopsh-and-zfs-testssh"></span><h3>Running zloop.sh and zfs-tests.sh<a class="headerlink" href="#running-zloop-sh-and-zfs-tests-sh" title="Permalink to this heading"></a></h3>
<p>If you wish to run the ZFS Test Suite (ZTS), then <code class="docutils literal notranslate"><span class="pre">ksh</span></code> and a few
additional utilities must be installed.</p>
<ul class="simple">
<li><p><strong>RHEL/CentOS 7:</strong></p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>ksh<span class="w"> </span>bc<span class="w"> </span>bzip2<span class="w"> </span>fio<span class="w"> </span>acl<span class="w"> </span>sysstat<span class="w"> </span>mdadm<span class="w"> </span>lsscsi<span class="w"> </span>parted<span class="w"> </span>attr<span class="w"> </span>nfs-utils<span class="w"> </span>samba<span class="w"> </span>rng-tools<span class="w"> </span>pax<span class="w"> </span>perf
sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>--enablerepo<span class="o">=</span>epel<span class="w"> </span>dbench
</pre></div>
</div>
<ul class="simple">
<li><p><strong>RHEL/CentOS 8, Fedora:</strong></p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>--skip-broken<span class="w"> </span>ksh<span class="w"> </span>bc<span class="w"> </span>bzip2<span class="w"> </span>fio<span class="w"> </span>acl<span class="w"> </span>sysstat<span class="w"> </span>mdadm<span class="w"> </span>lsscsi<span class="w"> </span>parted<span class="w"> </span>attr<span class="w"> </span>nfs-utils<span class="w"> </span>samba<span class="w"> </span>rng-tools<span class="w"> </span>pax<span class="w"> </span>perf
sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>--skip-broken<span class="w"> </span>--enablerepo<span class="o">=</span>epel<span class="w"> </span>dbench
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Debian:</strong></p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ksh<span class="w"> </span>bc<span class="w"> </span>bzip2<span class="w"> </span>fio<span class="w"> </span>acl<span class="w"> </span>sysstat<span class="w"> </span>mdadm<span class="w"> </span>lsscsi<span class="w"> </span>parted<span class="w"> </span>attr<span class="w"> </span>dbench<span class="w"> </span>nfs-kernel-server<span class="w"> </span>samba<span class="w"> </span>rng-tools<span class="w"> </span>pax<span class="w"> </span>linux-perf<span class="w"> </span>selinux-utils<span class="w"> </span>quota
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Ubuntu:</strong></p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ksh<span class="w"> </span>bc<span class="w"> </span>bzip2<span class="w"> </span>fio<span class="w"> </span>acl<span class="w"> </span>sysstat<span class="w"> </span>mdadm<span class="w"> </span>lsscsi<span class="w"> </span>parted<span class="w"> </span>attr<span class="w"> </span>dbench<span class="w"> </span>nfs-kernel-server<span class="w"> </span>samba<span class="w"> </span>rng-tools<span class="w"> </span>pax<span class="w"> </span>linux-tools-common<span class="w"> </span>selinux-utils<span class="w"> </span>quota
</pre></div>
</div>
<ul class="simple">
<li><p><strong>FreeBSD</strong>:</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pkg<span class="w"> </span>install<span class="w"> </span>base64<span class="w"> </span>bash<span class="w"> </span>checkbashisms<span class="w"> </span>fio<span class="w"> </span>hs-ShellCheck<span class="w"> </span>ksh93<span class="w"> </span>pamtester<span class="w"> </span>devel/py-flake8<span class="w"> </span>sudo
</pre></div>
</div>
<p>There are a few helper scripts provided in the top-level scripts
directory designed to aid developers working with in-tree builds.</p>
<ul class="simple">
<li><p><strong>zfs-helper.sh:</strong> Certain functionality (i.e. /dev/zvol/) depends on
the ZFS provided udev helper scripts being installed on the system.
This script can be used to create symlinks on the system from the
installation location to the in-tree helper. These links must be in
place to successfully run the ZFS Test Suite. The <strong>-i</strong> and <strong>-r</strong>
options can be used to install and remove the symlinks.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">scripts</span><span class="o">/</span><span class="n">zfs</span><span class="o">-</span><span class="n">helpers</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">i</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>zfs.sh:</strong> The freshly built kernel modules can be loaded using
<code class="docutils literal notranslate"><span class="pre">zfs.sh</span></code>. This script can later be used to unload the kernel
modules with the <strong>-u</strong> option.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">scripts</span><span class="o">/</span><span class="n">zfs</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>zloop.sh:</strong> A wrapper to run ztest repeatedly with randomized
arguments. The ztest command is a user space stress test designed to
detect correctness issues by concurrently running a random set of
test cases. If a crash is encountered, the ztest logs, any associated
vdev files, and core file (if one exists) are collected and moved to
the output directory for analysis.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">scripts</span><span class="o">/</span><span class="n">zloop</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>zfs-tests.sh:</strong> A wrapper which can be used to launch the ZFS Test
Suite. Three loopback devices are created on top of sparse files
located in <code class="docutils literal notranslate"><span class="pre">/var/tmp/</span></code> and used for the regression test. Detailed
directions for the ZFS Test Suite can be found in the
<a class="reference external" href="https://github.com/openzfs/zfs/tree/master/tests">README</a>
located in the top-level tests directory.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">scripts</span><span class="o">/</span><span class="n">zfs</span><span class="o">-</span><span class="n">tests</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">vx</span>
</pre></div>
</div>
<p><strong>tip:</strong> The <strong>delegate</strong> tests will be skipped unless group read
permission is set on the zfs directory and its parents.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Custom%20Packages.html" class="btn btn-neutral float-left" title="Custom Packages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Git%20and%20GitHub%20for%20beginners.html" class="btn btn-neutral float-right" title="Git and GitHub for beginners (ZoL edition)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, OpenZFS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>