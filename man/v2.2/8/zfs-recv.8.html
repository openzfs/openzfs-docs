

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>zfs-recv.8 &mdash; OpenZFS  documentation</title>
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/mandoc.css" type="text/css" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
      <script src="../../../_static/doctools.js?v=888ff710"></script>
      <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="zfs-redact.8" href="zfs-redact.8.html" />
    <link rel="prev" title="zfs-receive.8" href="zfs-receive.8.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #29667e" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/logo_main.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Getting%20Started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Project%20and%20Community/index.html">Project and Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Developer%20Resources/index.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Performance%20and%20Tuning/index.html">Performance and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Basic%20Concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Man Pages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../master/index.html">master</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.4/index.html">v2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.3/index.html">v2.3</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">v2.2</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../1/index.html">User Commands (1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4/index.html">Devices and Special Files (4)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5/index.html">File Formats and Conventions (5)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7/index.html">Miscellaneous (7)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">System Administration Commands (8)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="fsck.zfs.8.html">fsck.zfs.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="mount.zfs.8.html">mount.zfs.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="vdev_id.8.html">vdev_id.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zdb.8.html">zdb.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zed.8.html">zed.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-allow.8.html">zfs-allow.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-bookmark.8.html">zfs-bookmark.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-change-key.8.html">zfs-change-key.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-clone.8.html">zfs-clone.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-create.8.html">zfs-create.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-destroy.8.html">zfs-destroy.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-diff.8.html">zfs-diff.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-get.8.html">zfs-get.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-groupspace.8.html">zfs-groupspace.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-hold.8.html">zfs-hold.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-inherit.8.html">zfs-inherit.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-jail.8.html">zfs-jail.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-list.8.html">zfs-list.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-load-key.8.html">zfs-load-key.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-mount-generator.8.html">zfs-mount-generator.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-mount.8.html">zfs-mount.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-program.8.html">zfs-program.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-project.8.html">zfs-project.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-projectspace.8.html">zfs-projectspace.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-promote.8.html">zfs-promote.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-receive.8.html">zfs-receive.8</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">zfs-recv.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-redact.8.html">zfs-redact.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-release.8.html">zfs-release.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-rename.8.html">zfs-rename.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-rollback.8.html">zfs-rollback.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-send.8.html">zfs-send.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-set.8.html">zfs-set.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-share.8.html">zfs-share.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-snapshot.8.html">zfs-snapshot.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-unallow.8.html">zfs-unallow.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-unjail.8.html">zfs-unjail.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-unload-key.8.html">zfs-unload-key.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-unmount.8.html">zfs-unmount.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-unzone.8.html">zfs-unzone.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-upgrade.8.html">zfs-upgrade.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-userspace.8.html">zfs-userspace.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-wait.8.html">zfs-wait.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs-zone.8.html">zfs-zone.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs.8.html">zfs.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs_ids_to_path.8.html">zfs_ids_to_path.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zfs_prepare_disk.8.html">zfs_prepare_disk.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zgenhostid.8.html">zgenhostid.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zinject.8.html">zinject.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-add.8.html">zpool-add.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-attach.8.html">zpool-attach.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-checkpoint.8.html">zpool-checkpoint.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-clear.8.html">zpool-clear.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-create.8.html">zpool-create.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-destroy.8.html">zpool-destroy.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-detach.8.html">zpool-detach.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-events.8.html">zpool-events.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-export.8.html">zpool-export.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-get.8.html">zpool-get.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-history.8.html">zpool-history.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-import.8.html">zpool-import.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-initialize.8.html">zpool-initialize.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-iostat.8.html">zpool-iostat.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-labelclear.8.html">zpool-labelclear.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-list.8.html">zpool-list.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-offline.8.html">zpool-offline.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-online.8.html">zpool-online.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-reguid.8.html">zpool-reguid.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-remove.8.html">zpool-remove.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-reopen.8.html">zpool-reopen.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-replace.8.html">zpool-replace.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-resilver.8.html">zpool-resilver.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-scrub.8.html">zpool-scrub.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-set.8.html">zpool-set.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-split.8.html">zpool-split.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-status.8.html">zpool-status.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-sync.8.html">zpool-sync.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-trim.8.html">zpool-trim.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-upgrade.8.html">zpool-upgrade.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool-wait.8.html">zpool-wait.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool.8.html">zpool.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpool_influxdb.8.html">zpool_influxdb.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zstream.8.html">zstream.8</a></li>
<li class="toctree-l4"><a class="reference internal" href="zstreamdump.8.html">zstreamdump.8</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.1/index.html">v2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.0/index.html">v2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v0.8/index.html">v0.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v0.7/index.html">v0.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v0.6/index.html">v0.6</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../msg/index.html">ZFS Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../License.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #29667e" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">OpenZFS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Man Pages</a></li>
          <li class="breadcrumb-item"><a href="../index.html">v2.2</a></li>
          <li class="breadcrumb-item"><a href="index.html">System Administration Commands (8)</a></li>
      <li class="breadcrumb-item active">zfs-recv.8</li>
      <li class="wy-breadcrumbs-aside">
              <!-- User defined GitHub URL -->
              <a href="https://github.com/openzfs/zfs/blob/zfs-2.2.8/man/man8/zfs-recv.8" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="zfs-recv-8">
<h1>zfs-recv.8<a class="headerlink" href="#zfs-recv-8" title="Permalink to this heading"></a></h1>
<div class="man_container"><table class="head">
  <tr>
    <td class="head-ltitle">ZFS-RECEIVE(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">ZFS-RECEIVE(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">zfs-receive</code> &#x2014;
    <span class="Nd">create snapshot from backup stream</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">zfs</code></td>
    <td><code class="Cm">receive</code> [<code class="Fl">-FhMnsuv</code>]
      [<code class="Fl">-o</code>
      <b class="Sy">origin</b>=<var class="Ar">snapshot</var>]
      [<code class="Fl">-o</code>
      <var class="Ar">property</var>=<var class="Ar">value</var>]
      [<code class="Fl">-x</code> <var class="Ar">property</var>]
      <var class="Ar">filesystem</var>|<var class="Ar">volume</var>|<var class="Ar">snapshot</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">zfs</code></td>
    <td><code class="Cm">receive</code> [<code class="Fl">-FhMnsuv</code>]
      [<code class="Fl">-d</code>|<code class="Fl">-e</code>]
      [<code class="Fl">-o</code>
      <b class="Sy">origin</b>=<var class="Ar">snapshot</var>]
      [<code class="Fl">-o</code>
      <var class="Ar">property</var>=<var class="Ar">value</var>]
      [<code class="Fl">-x</code> <var class="Ar">property</var>]
      <var class="Ar">filesystem</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">zfs</code></td>
    <td><code class="Cm">receive</code> <code class="Fl">-A</code>
      <var class="Ar">filesystem</var>|<var class="Ar">volume</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">zfs</code></td>
    <td><code class="Cm">receive</code> <code class="Fl">-c</code>
      [<code class="Fl">-vn</code>]
      <var class="Ar">filesystem</var>|<var class="Ar">snapshot</var></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<dl class="Bl-tag">
  <dt><code class="Nm">zfs</code> <code class="Cm">receive</code>
    [<code class="Fl">-FhMnsuv</code>] [<code class="Fl">-o</code>
    <b class="Sy">origin</b>=<var class="Ar">snapshot</var>]
    [<code class="Fl">-o</code>
    <var class="Ar">property</var>=<var class="Ar">value</var>]
    [<code class="Fl">-x</code> <var class="Ar">property</var>]
    <var class="Ar">filesystem</var>|<var class="Ar">volume</var>|<var class="Ar">snapshot</var></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt><code class="Nm">zfs</code> <code class="Cm">receive</code>
    [<code class="Fl">-FhMnsuv</code>]
    [<code class="Fl">-d</code>|<code class="Fl">-e</code>]
    [<code class="Fl">-o</code>
    <b class="Sy">origin</b>=<var class="Ar">snapshot</var>]
    [<code class="Fl">-o</code>
    <var class="Ar">property</var>=<var class="Ar">value</var>]
    [<code class="Fl">-x</code> <var class="Ar">property</var>]
    <var class="Ar">filesystem</var></dt>
  <dd>Creates a snapshot whose contents are as specified in the stream provided
      on standard input. If a full stream is received, then a new file system is
      created as well. Streams are created using the <code class="Nm">zfs</code>
      <code class="Cm">send</code> subcommand, which by default creates a full
      stream. <code class="Nm">zfs</code> <code class="Cm">recv</code> can be
      used as an alias for <code class="Nm">zfs</code>
      <code class="Cm">receive</code>.
    <p class="Pp" id="zvols">If an incremental stream is received, then the
        destination file system must already exist, and its most recent snapshot
        must match the incremental stream's source. For
        <a class="permalink" href="#zvols"><b class="Sy">zvols</b></a>, the
        destination device link is destroyed and recreated, which means the
        <a class="permalink" href="#zvol"><b class="Sy" id="zvol">zvol</b></a>
        cannot be accessed during the <code class="Cm">receive</code>
      operation.</p>
    <p class="Pp">When a snapshot replication package stream that is generated
        by using the <code class="Nm">zfs</code> <code class="Cm">send</code>
        <code class="Fl">-R</code> command is received, any snapshots that do
        not exist on the sending location are destroyed by using the
        <code class="Nm">zfs</code> <code class="Cm">destroy</code>
        <code class="Fl">-d</code> command.</p>
    <p class="Pp">The ability to send and receive deduplicated send streams has
        been removed. However, a deduplicated send stream created with older
        software can be converted to a regular (non-deduplicated) stream by
        using the <code class="Nm">zstream</code> <code class="Cm">redup</code>
        command.</p>
    <p class="Pp" id="snapshot">If <code class="Fl">-o</code>
        <i class="Em">property</i>=<var class="Ar">value</var> or
        <code class="Fl">-x</code> <i class="Em">property</i> is specified, it
        applies to the effective value of the property throughout the entire
        subtree of replicated datasets. Effective property values will be set
        (<code class="Fl">-o</code>) or inherited (<code class="Fl">-x</code>)
        on the topmost in the replicated subtree. In descendant datasets, if the
        property is set by the send stream, it will be overridden by forcing the
        property to be inherited from the top&#x2010;most file system. Received
        properties are retained in spite of being overridden and may be restored
        with <code class="Nm">zfs</code> <code class="Cm">inherit</code>
        <code class="Fl">-S</code>. Specifying <code class="Fl">-o</code>
        <b class="Sy">origin</b>=<a class="permalink" href="#snapshot"><i class="Em">snapshot</i></a>
        is a special case because, even if <b class="Sy">origin</b> is a
        read-only property and cannot be set, it's allowed to receive the send
        stream as a clone of the given snapshot.</p>
    <p class="Pp">Raw encrypted send streams (created with
        <code class="Nm">zfs</code> <code class="Cm">send</code>
        <code class="Fl">-w</code>) may only be received as is, and cannot be
        re-encrypted, decrypted, or recompressed by the receive process.
        Unencrypted streams can be received as encrypted datasets, either
        through inheritance or by specifying encryption parameters with the
        <code class="Fl">-o</code> options. Note that the
        <b class="Sy">keylocation</b> property cannot be overridden to
        <b class="Sy">prompt</b> during a receive. This is because the receive
        process itself is already using the standard input for the send stream.
        Instead, the property can be overridden after the receive completes.</p>
    <p class="Pp">The added security provided by raw sends adds some
        restrictions to the send and receive process. ZFS will not allow a mix
        of raw receives and non-raw receives. Specifically, any raw incremental
        receives that are attempted after a non-raw receive will fail. Non-raw
        receives do not have this restriction and, therefore, are always
        possible. Because of this, it is best practice to always use either raw
        sends for their security benefits or non-raw sends for their flexibility
        when working with encrypted datasets, but not a combination.</p>
    <p class="Pp">The reason for this restriction stems from the inherent
        restrictions of the AEAD ciphers that ZFS uses to encrypt data. When
        using ZFS native encryption, each block of data is encrypted against a
        randomly generated number known as the &quot;initialization vector&quot;
        (IV), which is stored in the filesystem metadata. This number is
        required by the encryption algorithms whenever the data is to be
        decrypted. Together, all of the IVs provided for all of the blocks in a
        given snapshot are collectively called an &quot;IV set&quot;. When ZFS
        performs a raw send, the IV set is transferred from the source to the
        destination in the send stream. When ZFS performs a non-raw send, the
        data is decrypted by the source system and re-encrypted by the
        destination system, creating a snapshot with effectively the same data,
        but a different IV set. In order for decryption to work after a raw
        send, ZFS must ensure that the IV set used on both the source and
        destination side match. When an incremental raw receive is performed on
        top of an existing snapshot, ZFS will check to confirm that the
        &quot;from&quot; snapshot on both the source and destination were using
        the same IV set, ensuring the new IV set is consistent.</p>
    <p class="Pp">The name of the snapshot (and file system, if a full stream is
        received) that this subcommand creates depends on the argument type and
        the use of the <code class="Fl">-d</code> or <code class="Fl">-e</code>
        options.</p>
    <p class="Pp">If the argument is a snapshot name, the specified
        <var class="Ar">snapshot</var> is created. If the argument is a file
        system or volume name, a snapshot with the same name as the sent
        snapshot is created within the specified
        <var class="Ar">filesystem</var> or <var class="Ar">volume</var>. If
        neither of the <code class="Fl">-d</code> or <code class="Fl">-e</code>
        options are specified, the provided target snapshot name is used exactly
        as provided.</p>
    <p class="Pp">The <code class="Fl">-d</code> and <code class="Fl">-e</code>
        options cause the file system name of the target snapshot to be
        determined by appending a portion of the sent snapshot's name to the
        specified target <var class="Ar">filesystem</var>. If the
        <code class="Fl">-d</code> option is specified, all but the first
        element of the sent snapshot's file system path (usually the pool name)
        is used and any required intermediate file systems within the specified
        one are created. If the <code class="Fl">-e</code> option is specified,
        then only the last element of the sent snapshot's file system name (i.e.
        the name of the source file system itself) is used as the target file
        system name.</p>
    <dl class="Bl-tag">
      <dt id="F"><a class="permalink" href="#F"><code class="Fl">-F</code></a></dt>
      <dd>Force a rollback of the file system to the most recent snapshot before
          performing the receive operation. If receiving an incremental
          replication stream (for example, one generated by
          <code class="Nm">zfs</code> <code class="Cm">send</code>
          <code class="Fl">-R</code>
          [<code class="Fl">-i</code>|<code class="Fl">-I</code>]), destroy
          snapshots and file systems that do not exist on the sending side.</dd>
      <dt id="d"><a class="permalink" href="#d"><code class="Fl">-d</code></a></dt>
      <dd>Discard the first element of the sent snapshot's file system name,
          using the remaining elements to determine the name of the target file
          system for the new snapshot as described in the paragraph above.</dd>
      <dt id="e"><a class="permalink" href="#e"><code class="Fl">-e</code></a></dt>
      <dd>Discard all but the last element of the sent snapshot's file system
          name, using that element to determine the name of the target file
          system for the new snapshot as described in the paragraph above.</dd>
      <dt id="h"><a class="permalink" href="#h"><code class="Fl">-h</code></a></dt>
      <dd>Skip the receive of holds. There is no effect if holds are not
        sent.</dd>
      <dt id="M"><a class="permalink" href="#M"><code class="Fl">-M</code></a></dt>
      <dd>Force an unmount of the file system while receiving a snapshot. This
          option is not supported on Linux.</dd>
      <dt id="n"><a class="permalink" href="#n"><code class="Fl">-n</code></a></dt>
      <dd>Do not actually receive the stream. This can be useful in conjunction
          with the <code class="Fl">-v</code> option to verify the name the
          receive operation would use.</dd>
      <dt id="o"><a class="permalink" href="#o"><code class="Fl">-o</code></a>
        <b class="Sy">origin</b>=<var class="Ar">snapshot</var></dt>
      <dd>Forces the stream to be received as a clone of the given snapshot. If
          the stream is a full send stream, this will create the filesystem
          described by the stream as a clone of the specified snapshot. Which
          snapshot was specified will not affect the success or failure of the
          receive, as long as the snapshot does exist. If the stream is an
          incremental send stream, all the normal verification will be
          performed.</dd>
      <dt id="o~2"><a class="permalink" href="#o~2"><code class="Fl">-o</code></a>
        <i class="Em">property</i>=<var class="Ar">value</var></dt>
      <dd>Sets the specified property as if the command
          <code class="Nm">zfs</code> <code class="Cm">set</code>
          <i class="Em">property</i>=<var class="Ar">value</var> was invoked
          immediately before the receive. When receiving a stream from
          <code class="Nm">zfs</code> <code class="Cm">send</code>
          <code class="Fl">-R</code>, causes the property to be inherited by all
          descendant datasets, as through <code class="Nm">zfs</code>
          <code class="Cm">inherit</code> <i class="Em">property</i> was run on
          any descendant datasets that have this property set on the sending
          system.
        <p class="Pp">If the send stream was sent with
            <code class="Fl">-c</code> then overriding the
            <b class="Sy">compression</b> property will have no effect on
            received data but the <b class="Sy">compression</b> property will be
            set. To have the data recompressed on receive remove the
            <code class="Fl">-c</code> flag from the send stream.</p>
        <p class="Pp" id="normalization">Any editable property can be set at
            receive time. Set-once properties bound to the received data, such
            as
            <a class="permalink" href="#normalization"><b class="Sy">normalization</b></a>
            and
            <a class="permalink" href="#casesensitivity"><b class="Sy" id="casesensitivity">casesensitivity</b></a>,
            cannot be set at receive time even when the datasets are newly
            created by <code class="Nm">zfs</code>
            <code class="Cm">receive</code>. Additionally both settable
            properties
            <a class="permalink" href="#version"><b class="Sy" id="version">version</b></a>
            and
            <a class="permalink" href="#volsize"><b class="Sy" id="volsize">volsize</b></a>
            cannot be set at receive time.</p>
        <p class="Pp">The <code class="Fl">-o</code> option may be specified
            multiple times, for different properties. An error results if the
            same property is specified in multiple <code class="Fl">-o</code> or
            <code class="Fl">-x</code> options.</p>
        <p class="Pp">The <code class="Fl">-o</code> option may also be used to
            override encryption properties upon initial receive. This allows
            unencrypted streams to be received as encrypted datasets. To cause
            the received dataset (or root dataset of a recursive stream) to be
            received as an encryption root, specify encryption properties in the
            same manner as is required for <code class="Nm">zfs</code>
            <code class="Cm">create</code>. For instance:</p>
        <div class="Bd Bd-indent"><code class="Li"># <code class="Nm">zfs</code>
          <code class="Cm">send</code> <span class="Pa">tank/test@snap1</span> |
          <code class="Nm">zfs</code> <code class="Cm">recv</code>
          <code class="Fl">-o</code>
          <b class="Sy">encryption</b>=<a class="permalink" href="#on"><b class="Sy" id="on">on</b></a>
          <code class="Fl">-o</code>
          <a class="permalink" href="#keyformat"><b class="Sy" id="keyformat">keyformat</b></a>=<a class="permalink" href="#passphrase"><b class="Sy" id="passphrase">passphrase</b></a>
          <code class="Fl">-o</code>
          <b class="Sy">keylocation</b>=<span class="Pa">file:///path/to/keyfile</span></code></div>
        <p class="Pp">Note that <code class="Fl">-o</code>
            <b class="Sy">keylocation</b>=<b class="Sy">prompt</b> may not be
            specified here, since the standard input is already being utilized
            for the send stream. Once the receive has completed, you can use
            <code class="Nm">zfs</code> <code class="Cm">set</code> to change
            this setting after the fact. Similarly, you can receive a dataset as
            an encrypted child by specifying <code class="Fl">-x</code>
            <b class="Sy">encryption</b> to force the property to be inherited.
            Overriding encryption properties (except for
            <b class="Sy">keylocation</b>) is not possible with raw send
            streams.</p>
      </dd>
      <dt id="s"><a class="permalink" href="#s"><code class="Fl">-s</code></a></dt>
      <dd>If the receive is interrupted, save the partially received state,
          rather than deleting it. Interruption may be due to premature
          termination of the stream (e.g. due to network failure or failure of
          the remote system if the stream is being read over a network
          connection), a checksum error in the stream, termination of the
          <code class="Nm">zfs</code> <code class="Cm">receive</code> process,
          or unclean shutdown of the system.
        <p class="Pp" id="receive_resume_token">The receive can be resumed with
            a stream generated by <code class="Nm">zfs</code>
            <code class="Cm">send</code> <code class="Fl">-t</code>
            <var class="Ar">token</var>, where the <var class="Ar">token</var>
            is the value of the
            <a class="permalink" href="#receive_resume_token"><b class="Sy">receive_resume_token</b></a>
            property of the filesystem or volume which is received into.</p>
        <p class="Pp" id="extensible_dataset">To use this flag, the storage pool
            must have the
            <a class="permalink" href="#extensible_dataset"><b class="Sy">extensible_dataset</b></a>
            feature enabled. See <a href="../7/zpool-features.7.html" class="Xr">zpool-features(7)</a> for details
            on ZFS feature flags.</p>
      </dd>
      <dt id="u"><a class="permalink" href="#u"><code class="Fl">-u</code></a></dt>
      <dd>File system that is associated with the received stream is not
          mounted.</dd>
      <dt id="v"><a class="permalink" href="#v"><code class="Fl">-v</code></a></dt>
      <dd>Print verbose information about the stream and the time required to
          perform the receive operation.</dd>
      <dt id="x"><a class="permalink" href="#x"><code class="Fl">-x</code></a>
        <i class="Em">property</i></dt>
      <dd>Ensures that the effective value of the specified property after the
          receive is unaffected by the value of that property in the send stream
          (if any), as if the property had been excluded from the send stream.
        <p class="Pp">If the specified property is not present in the send
            stream, this option does nothing.</p>
        <p class="Pp">If a received property needs to be overridden, the
            effective value will be set or inherited, depending on whether the
            property is inheritable or not.</p>
        <p class="Pp">In the case of an incremental update,
            <code class="Fl">-x</code> leaves any existing local setting or
            explicit inheritance unchanged.</p>
        <p class="Pp">All <code class="Fl">-o</code> restrictions (e.g.
            set-once) apply equally to <code class="Fl">-x</code>.</p>
      </dd>
    </dl>
  </dd>
  <dt><code class="Nm">zfs</code> <code class="Cm">receive</code>
    <code class="Fl">-A</code>
    <var class="Ar">filesystem</var>|<var class="Ar">volume</var></dt>
  <dd>Abort an interrupted <code class="Nm">zfs</code>
      <code class="Cm">receive</code> <code class="Fl">-s</code>, deleting its
      saved partially received state.</dd>
  <dt><code class="Nm">zfs</code> <code class="Cm">receive</code>
    <code class="Fl">-c</code> [<code class="Fl">-vn</code>]
    <var class="Ar">filesystem</var>|<var class="Ar">snapshot</var></dt>
  <dd>Attempt to repair data corruption in the specified dataset, by using the
      provided stream as the source of healthy data. This method of healing can
      only heal data blocks present in the stream. Metadata can not be healed by
      corrective receive. Running a scrub is recommended post-healing to ensure
      all data corruption was repaired.
    <p class="Pp">It's important to consider why corruption has happened in the
        first place. If you have slowly failing hardware - periodically
        repairing the data is not going to save you from data loss later on when
        the hardware fails completely.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<section class="Ss">
<h2 class="Ss" id="Example_1_:_Remotely_Replicating_ZFS_Data"><a class="permalink" href="#Example_1_:_Remotely_Replicating_ZFS_Data">Example
  1: <span class="No">Remotely Replicating ZFS Data</span></a></h2>
<p class="Pp">The following commands send a full stream and then an incremental
    stream to a remote machine, restoring them into
    <a class="permalink" href="#poolB/received/fs@a"><i class="Em" id="poolB/received/fs@a">poolB/received/fs@a</i></a>
    and
    <a class="permalink" href="#poolB/received/fs@b"><i class="Em" id="poolB/received/fs@b">poolB/received/fs@b</i></a>,
    respectively.
    <a class="permalink" href="#poolB"><i class="Em" id="poolB">poolB</i></a>
    must contain the file system
    <a class="permalink" href="#poolB/received"><i class="Em" id="poolB/received">poolB/received</i></a>,
    and must not initially contain
    <a class="permalink" href="#poolB/received/fs"><i class="Em" id="poolB/received/fs">poolB/received/fs</i></a>.</p>
<div class="Bd Bd-indent Li">
<pre><span class="No">#</span> <code class="Nm">zfs</code> <code class="Cm">send</code> <var class="Ar">pool/fs@a</var> |
<span class="No">   </span> <code class="Nm">ssh</code> <var class="Ar">host</var> <code class="Nm">zfs</code> <code class="Cm">receive</code> <var class="Ar">poolB/received/fs</var>@<var class="Ar">a</var>
<span class="No">#</span> <code class="Nm">zfs</code> <code class="Cm">send</code> <code class="Fl">-i</code> <var class="Ar">a pool/fs@b</var> |
<span class="No">   </span> <code class="Nm">ssh</code> <var class="Ar">host</var> <code class="Nm">zfs</code> <code class="Cm">receive</code> <var class="Ar">poolB/received/fs</var></pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Example_2_:_Using_the_zfs_receive_d_Option"><a class="permalink" href="#Example_2_:_Using_the_zfs_receive_d_Option">Example
  2: <span class="No">Using the</span> <code class="Nm">zfs</code>
  <code class="Cm">receive</code> <code class="Fl">-d</code>
  <span class="No">Option</span></a></h2>
<p class="Pp">The following command sends a full stream of
    <var class="Ar">poolA/fsA/fsB@snap</var> to a remote machine, receiving it
    into <var class="Ar">poolB/received/fsA/fsB@snap</var>. The
    <var class="Ar">fsA/fsB@snap</var> portion of the received snapshot's name
    is determined from the name of the sent snapshot.
    <var class="Ar">poolB</var> must contain the file system
    <var class="Ar">poolB/received</var>. If
    <var class="Ar">poolB/received/fsA</var> does not exist, it is created as an
    empty file system.</p>
<div class="Bd Bd-indent Li">
<pre><span class="No">#</span> <code class="Nm">zfs</code> <code class="Cm">send</code> <var class="Ar">poolA/fsA/fsB@snap</var> |
<span class="No">   </span> <code class="Nm">ssh</code> <var class="Ar">host</var> <code class="Nm">zfs</code> <code class="Cm">receive</code> <code class="Fl">-d</code> <var class="Ar">poolB/received</var></pre>
</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a href="../8/zfs-send.8.html" class="Xr">zfs-send(8)</a>, <a href="../8/zstream.8.html" class="Xr">zstream(8)</a></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">March 12, 2023</td>
    <td class="foot-os">Debian</td>
  </tr>
</table>
</div></section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="zfs-receive.8.html" class="btn btn-neutral float-left" title="zfs-receive.8" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="zfs-redact.8.html" class="btn btn-neutral float-right" title="zfs-redact.8" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, OpenZFS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>