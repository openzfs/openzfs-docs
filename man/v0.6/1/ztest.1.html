

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ztest.1 &mdash; OpenZFS  documentation</title>
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/mandoc.css" type="text/css" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
      <script src="../../../_static/doctools.js?v=888ff710"></script>
      <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="File Formats and Conventions (5)" href="../5/index.html" />
    <link rel="prev" title="zpios.1" href="zpios.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #29667e" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/logo_main.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Getting%20Started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Project%20and%20Community/index.html">Project and Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Developer%20Resources/index.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Performance%20and%20Tuning/index.html">Performance and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Basic%20Concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Man Pages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../master/index.html">master</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.4/index.html">v2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.3/index.html">v2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.2/index.html">v2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.1/index.html">v2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.0/index.html">v2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v0.8/index.html">v0.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v0.7/index.html">v0.7</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">v0.6</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">User Commands (1)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cstyle.1.html">cstyle.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="zhack.1.html">zhack.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="zpios.1.html">zpios.1</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">ztest.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../5/index.html">File Formats and Conventions (5)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../8/index.html">System Administration Commands (8)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../msg/index.html">ZFS Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../License.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #29667e" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">OpenZFS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Man Pages</a></li>
          <li class="breadcrumb-item"><a href="../index.html">v0.6</a></li>
          <li class="breadcrumb-item"><a href="index.html">User Commands (1)</a></li>
      <li class="breadcrumb-item active">ztest.1</li>
      <li class="wy-breadcrumbs-aside">
              <!-- User defined GitHub URL -->
              <a href="https://github.com/openzfs/zfs/blob/zfs-0.6.5.11/man/man1/ztest.1" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ztest-1">
<h1>ztest.1<a class="headerlink" href="#ztest-1" title="Permalink to this heading">ÔÉÅ</a></h1>
<div class="man_container"><table class="head">
  <tr>
    <td class="head-ltitle">ztest(1)</td>
    <td class="head-vol">User Commands</td>
    <td class="head-rtitle">ztest(1)</td>
  </tr>
</table>
<div class="manual-text">
<p class="Pp"></p>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><b>ztest</b> - was written by the ZFS Developers as a ZFS unit
    test.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>ztest &lt;options&gt;</b></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This manual page documents briefly the <b>ztest</b> command.</p>
<p class="Pp"><b>ztest</b> was written by the ZFS Developers as a ZFS unit test.
    The tool was developed in tandem with the ZFS functionality and was executed
    nightly as one of the many regression test against the daily build. As
    features were added to ZFS, unit tests were also added to <b>ztest</b>. In
    addition, a separate test development team wrote and executed more
    functional and stress tests.</p>
<p class="Pp">By default <b>ztest</b> runs for ten minutes and uses block files
    (stored in /tmp) to create pools rather than using physical disks. Block
    files afford <b>ztest</b> its flexibility to play around with zpool
    components without requiring large hardware configurations. However, storing
    the block files in /tmp may not work for you if you have a small tmp
    directory.</p>
<p class="Pp">By default is non-verbose. This is why entering the command above
    will result in <b>ztest</b> quietly executing for 5 minutes. The -V option
    can be used to increase the verbosity of the tool. Adding multiple -V option
    is allowed and the more you add the more chatty <b>ztest</b> becomes.</p>
<p class="Pp">After the <b>ztest</b> run completes, you should notice many
    ztest.* files lying around. Once the run completes you can safely remove
    these files. Note that you shouldn't remove these files during a run. You
    can re-use these files in your next <b>ztest</b> run by using the -E
  option.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp HP"><b>-?</b><i></i></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Print a help summary.</dd>
</dl>
<p class="Pp HP"><b>-v</b><i> vdevs</i><b> (default: 5)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Number of vdevs.</dd>
</dl>
<p class="Pp HP"><b>-s</b><i> size_of_each_vdev</i><b> (default: 64M)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Size of each vdev.</dd>
</dl>
<p class="Pp HP"><b>-a</b><i> alignment_shift</i><b> (default: 9) (use 0 for
    random)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Used alignment in test.</dd>
</dl>
<p class="Pp HP"><b>-m</b><i> mirror_copies</i><b> (default: 2)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Number of mirror copies.</dd>
</dl>
<p class="Pp HP"><b>-r</b><i> raidz_disks</i><b> (default: 4)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Number of raidz disks.</dd>
</dl>
<p class="Pp HP"><b>-R</b><i> raidz_parity</i><b> (default: 1)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Raidz parity.</dd>
</dl>
<p class="Pp HP"><b>-d</b><i> datasets</i><b> (default: 7)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Number of datasets.</dd>
</dl>
<p class="Pp HP"><b>-t</b><i> threads</i><b> (default: 23)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Number of threads.</dd>
</dl>
<p class="Pp HP"><b>-g</b><i> gang_block_threshold</i><b> (default: 32K)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Gang block threshold.</dd>
</dl>
<p class="Pp HP"><b>-i</b><i> initialize_pool_i_times</i><b> (default:
  1)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Number of pool initialisations.</dd>
</dl>
<p class="Pp HP"><b>-k</b><i> kill_percentage</i><b> (default: 70%)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Kill percentage.</dd>
</dl>
<p class="Pp HP"><b>-p</b><i> pool_name</i><b> (default: ztest)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Pool name.</dd>
</dl>
<p class="Pp HP"><b>-V(erbose)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Verbose (use multiple times for ever more blather).</dd>
</dl>
<p class="Pp HP"><b>-E(xisting)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Use existing pool (use existing pool instead of creating new one).</dd>
</dl>
<p class="Pp HP"><b>-T</b><i> time</i><b> (default: 300 sec)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Total test run time.</dd>
</dl>
<p class="Pp HP"><b>-z</b><i> zil_failure_rate</i><b> (default: fail every 2^5
    allocs)</b></p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>Injected failure rate.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">To override /tmp as your location for block files, you can use the
    -f option:</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>ztest -f /</dd>
</dl>
<p class="Pp">To get an idea of what ztest is actually testing try this:</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>ztest -f / -VVV</dd>
</dl>
<p class="Pp">Maybe you'd like to run ztest for longer? To do so simply use the
    -T option and specify the runlength in seconds like so:</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>ztest -f / -V -T 120
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT_VARIABLES"><a class="permalink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<dl class="Bl-tag">
  <dt id="ZFS_STACK_SIZE=stacksize"><a class="permalink" href="#ZFS_STACK_SIZE=stacksize"><b>ZFS_STACK_SIZE=stacksize</b></a></dt>
  <dd>Limit the default stack size to <b>stacksize</b> bytes for the purpose of
      detecting and debugging kernel stack overflows. For x86_64 platforms this
      value should be set as follows to simulate these platforms: <b>8192</b>
      (Linux), <b>20480</b> (Illumos), <b>16384</b> (FreeBSD).
    <p class="Pp">In practice you may need to set these value slightly higher
        because differences in stack usage between kernel and user space can
        lead to spurious stack overflows (especially when debugging is enabled).
        The specified value will be rounded up to a floor of PTHREAD_STACK_MIN
        which is the minimum stack required for a NULL procedure in user
      space.</p>
    <p class="Pp">By default the stack size is limited to 256K.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>zpool (1)</b>, <b>zfs (1)</b>, <b>zdb (1)</b>,</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">This manual page was transvered to asciidoc by Michael
    Gebetsroither &lt;gebi@grml.org&gt; from
    http://opensolaris.org/os/community/zfs/ztest/</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2009 NOV 01</td>
    <td class="foot-os">ZFS on Linux</td>
  </tr>
</table>
</div></section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="zpios.1.html" class="btn btn-neutral float-left" title="zpios.1" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../5/index.html" class="btn btn-neutral float-right" title="File Formats and Conventions (5)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, OpenZFS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>