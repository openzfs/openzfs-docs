

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>vdev_id.conf.5 &mdash; OpenZFS  documentation</title>
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/mandoc.css" type="text/css" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="canonical" href="https://openzfs.github.io/openzfs-docs/man/v2.4/5/vdev_id.conf.5.html" />
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../../../_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="../../../_static/js/redirect.js?v=2a1712f3"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Miscellaneous (7)" href="../7/index.html" />
    <link rel="prev" title="File Formats and Conventions (5)" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #29667e" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/logo_main.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Getting%20Started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Project%20and%20Community/index.html">Project and Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Developer%20Resources/index.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Performance%20and%20Tuning/index.html">Performance and Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Basic%20Concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Man Pages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../master/index.html">master</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">v2.4</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../1/index.html">User Commands (1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4/index.html">Devices and Special Files (4)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">File Formats and Conventions (5)</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">vdev_id.conf.5</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../7/index.html">Miscellaneous (7)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../8/index.html">System Administration Commands (8)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.3/index.html">v2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.2/index.html">v2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.1/index.html">v2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v2.0/index.html">v2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v0.8/index.html">v0.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v0.7/index.html">v0.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../v0.6/index.html">v0.6</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../msg/index.html">ZFS Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../License.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #29667e" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">OpenZFS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Man Pages</a></li>
          <li class="breadcrumb-item"><a href="../index.html">v2.4</a></li>
          <li class="breadcrumb-item"><a href="index.html">File Formats and Conventions (5)</a></li>
      <li class="breadcrumb-item active">vdev_id.conf.5</li>
      <li class="wy-breadcrumbs-aside">
              <!-- User defined GitHub URL -->
              <a href="https://github.com/openzfs/zfs/blob/zfs-2.4.0/man/man5/vdev_id.conf.5" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="vdev-id-conf-5">
<h1>vdev_id.conf.5<a class="headerlink" href="#vdev-id-conf-5" title="Link to this heading">ÔÉÅ</a></h1>
<div class="man_container"><table class="head">
  <tr>
    <td class="head-ltitle">VDEV_ID.CONF(5)</td>
    <td class="head-vol">File Formats Manual</td>
    <td class="head-rtitle">VDEV_ID.CONF(5)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">vdev_id.conf</code> &#x2014;
    <span class="Nd">configuration file for vdev_id(8)</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><code class="Nm">vdev_id.conf</code> is the configuration file for
    <a href="../8/vdev_id.8.html" class="Xr">vdev_id(8)</a>. It controls the default behavior of
    <a href="../8/vdev_id.8.html" class="Xr">vdev_id(8)</a> while it is mapping a disk device name to an
    alias.</p>
<p class="Pp">The <code class="Nm">vdev_id.conf</code> file uses a simple format
    consisting of a keyword followed by one or more values on a single line. Any
    line not beginning with a recognized keyword is ignored. Comments may
    optionally begin with a hash character.</p>
<p class="Pp">The following keywords and values are used.</p>
<dl class="Bl-tag">
  <dt id="alias"><a class="permalink" href="#alias"><b class="Sy">alias</b></a>
    <var class="Ar">name</var> <var class="Ar">devlink</var></dt>
  <dd>Maps a device link in the <span class="Pa">/dev</span> directory hierarchy
      to a new device name. The udev rule defining the device link must have run
      prior to <a href="../8/vdev_id.8.html" class="Xr">vdev_id(8)</a>. A defined alias takes precedence
      over a topology-derived name, but the two naming methods can otherwise
      coexist. For example, one might name drives in a JBOD with the
      <b class="Sy">sas_direct</b> topology while naming an internal L2ARC
      device with an alias.
    <p class="Pp"><var class="Ar">name</var> is the name of the link to the
        device that will by created under
        <span class="Pa">/dev/disk/by-vdev</span>.</p>
    <p class="Pp"><var class="Ar">devlink</var> is the name of the device link
        that has already been defined by udev. This may be an absolute path or
        the base filename.</p>
  </dd>
  <dt id="channel"><a class="permalink" href="#channel"><b class="Sy">channel</b></a>
    [<var class="Ar">pci_slot</var>] <var class="Ar">port</var>
    <var class="Ar">name</var></dt>
  <dd>Maps a physical path to a channel name (typically representing a single
      disk enclosure).</dd>
  <dt id="enclosure_symlinks"><a class="permalink" href="#enclosure_symlinks"><b class="Sy">enclosure_symlinks</b></a>
    <b class="Sy">yes</b>|<b class="Sy">no</b></dt>
  <dd>Additionally create <span class="Pa">/dev/by-enclosure</span> symlinks to
      the disk enclosure
      <a class="permalink" href="#sg"><i class="Em" id="sg">sg</i></a> devices
      using the naming scheme from <span class="Pa">vdev_id.conf</span>.
      <b class="Sy">enclosure_symlinks</b> is only allowed for
      <b class="Sy">sas_direct</b> mode.</dd>
  <dt id="enclosure_symlinks_prefix"><a class="permalink" href="#enclosure_symlinks_prefix"><b class="Sy">enclosure_symlinks_prefix</b></a>
    <var class="Ar">prefix</var></dt>
  <dd>Specify the prefix for the enclosure symlinks in the form
      <span class="Pa">/dev/by-enclosure/</span>&#x27E8;<var class="Ar">prefix</var>&#x27E9;-&#x27E8;<var class="Ar">channel</var>&#x27E9;&#x27E8;<var class="Ar">num</var>&#x27E9;
    <p class="Pp" id="enc">Defaults to
        &#x201C;<a class="permalink" href="#enc"><i class="Em">enc</i></a>&#x201D;.</p>
  </dd>
  <dt id="slot"><a class="permalink" href="#slot"><b class="Sy">slot</b></a>
    <var class="Ar">prefix</var> <var class="Ar">new</var>
    [<var class="Ar">channel</var>]</dt>
  <dd>Maps a disk slot number as reported by the operating system to an
      alternative slot number. If the <var class="Ar">channel</var> parameter is
      specified then the mapping is only applied to slots in the named channel,
      otherwise the mapping is applied to all channels. The first-specified
      <var class="Ar">slot</var> rule that can match a slot takes precedence.
      Therefore a channel-specific mapping for a given slot should generally
      appear before a generic mapping for the same slot. In this way a custom
      mapping may be applied to a particular channel and a default mapping
      applied to the others.</dd>
  <dt id="zpad_slot"><a class="permalink" href="#zpad_slot"><b class="Sy">zpad_slot</b></a>
    <var class="Ar">digits</var></dt>
  <dd>Pad slot numbers with zeros to make them <var class="Ar">digits</var>
      long, which can help to make disk names a consistent length and easier to
      sort.</dd>
  <dt id="multipath"><a class="permalink" href="#multipath"><b class="Sy">multipath</b></a>
    <b class="Sy">yes</b>|<b class="Sy">no</b></dt>
  <dd>Specifies whether <a href="../8/vdev_id.8.html" class="Xr">vdev_id(8)</a> will handle only
      dm-multipath devices. If set to <b class="Sy">yes</b> then
      <a href="../8/vdev_id.8.html" class="Xr">vdev_id(8)</a> will examine the first running component disk
      of a dm-multipath device as provided by the driver command to determine
      the physical path.</dd>
  <dt id="topology"><a class="permalink" href="#topology"><b class="Sy">topology</b></a>
    <b class="Sy">sas_direct</b>|<b class="Sy">sas_switch</b>|<b class="Sy">scsi</b></dt>
  <dd>Identifies a physical topology that governs how physical paths are mapped
      to channels:
    <dl class="Bl-tag Bl-compact">
      <dt id="sas_direct"><a class="permalink" href="#sas_direct"><b class="Sy">sas_direct</b></a>
        <span class="No">and</span> <b class="Sy">scsi</b></dt>
      <dd>channels are uniquely identified by a PCI slot and HBA port
        number</dd>
      <dt id="sas_switch"><a class="permalink" href="#sas_switch"><b class="Sy">sas_switch</b></a></dt>
      <dd>channels are uniquely identified by a SAS switch port number</dd>
    </dl>
  </dd>
  <dt id="phys_per_port"><a class="permalink" href="#phys_per_port"><b class="Sy">phys_per_port</b></a>
    <var class="Ar">num</var></dt>
  <dd>Specifies the number of PHY devices associated with a SAS HBA port or SAS
      switch port. <a href="../8/vdev_id.8.html" class="Xr">vdev_id(8)</a> internally uses this value to
      determine which HBA or switch port a device is connected to. The default
      is <a class="permalink" href="#4"><b class="Sy" id="4">4</b></a>.</dd>
  <dt id="slot~2"><a class="permalink" href="#slot~2"><b class="Sy">slot</b></a>
    <b class="Sy">bay</b>|<b class="Sy">phy</b>|<b class="Sy">port</b>|<b class="Sy">id</b>|<b class="Sy">lun</b>|<b class="Sy">bay_lun</b>|<b class="Sy">ses</b></dt>
  <dd>Specifies from which element of a SAS identifier the slot number is taken.
      The default is <b class="Sy">bay</b>:
    <dl class="Bl-tag Bl-compact">
      <dt id="bay"><a class="permalink" href="#bay"><b class="Sy">bay</b></a></dt>
      <dd>read the slot number from the bay identifier.</dd>
      <dt id="phy"><a class="permalink" href="#phy"><b class="Sy">phy</b></a></dt>
      <dd>read the slot number from the phy identifier.</dd>
      <dt id="port"><a class="permalink" href="#port"><b class="Sy">port</b></a></dt>
      <dd>use the SAS port as the slot number.</dd>
      <dt id="id"><a class="permalink" href="#id"><b class="Sy">id</b></a></dt>
      <dd>use the scsi id as the slot number.</dd>
      <dt id="lun"><a class="permalink" href="#lun"><b class="Sy">lun</b></a></dt>
      <dd>use the scsi lun as the slot number.</dd>
      <dt id="bay_lun"><a class="permalink" href="#bay_lun"><b class="Sy">bay_lun</b></a></dt>
      <dd>read the slot number from the bay identifier and append the lun
          number. Useful for multi-lun multi-actuator hard drives.</dd>
      <dt id="ses"><a class="permalink" href="#ses"><b class="Sy">ses</b></a></dt>
      <dd>use the SCSI Enclosure Services (SES) enclosure device slot number, as
          reported by <a class="Xr">sg_ses(8)</a>. Intended for use only on
          systems where <b class="Sy">bay</b> is unsupported, noting that
          <b class="Sy">port</b> and <b class="Sy">id</b> may be unstable across
          disk replacement.</dd>
    </dl>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt><span class="Pa">/etc/zfs/vdev_id.conf</span></dt>
  <dd>The configuration file for <a href="../8/vdev_id.8.html" class="Xr">vdev_id(8)</a>.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">A non-multipath configuration with direct-attached SAS enclosures
    and an arbitrary slot re-mapping:</p>
<div class="Bd Bd-indent Li">
<pre>multipath     no
topology      sas_direct
phys_per_port 4
slot          bay

#       PCI_SLOT HBA PORT  CHANNEL NAME
channel 85:00.0  1         A
channel 85:00.0  0         B
channel 86:00.0  1         C
channel 86:00.0  0         D

# Custom mapping for Channel A

#    Linux      Mapped
#    Slot       Slot      Channel
slot 1          7         A
slot 2          10        A
slot 3          3         A
slot 4          6         A

# Default mapping for B, C, and D

slot 1          4
slot 2          2
slot 3          1
slot 4          3</pre>
</div>
<p class="Pp">A SAS-switch topology. Note, that the
    <var class="Ar">channel</var> keyword takes only two arguments in this
    example:</p>
<div class="Bd Bd-indent Li">
<pre>topology      sas_switch

#       SWITCH PORT  CHANNEL NAME
channel 1            A
channel 2            B
channel 3            C
channel 4            D</pre>
</div>
<p class="Pp">A multipath configuration. Note that channel names have multiple
    definitions - one per physical path:</p>
<div class="Bd Bd-indent Li">
<pre>multipath yes

#       PCI_SLOT HBA PORT  CHANNEL NAME
channel 85:00.0  1         A
channel 85:00.0  0         B
channel 86:00.0  1         A
channel 86:00.0  0         B</pre>
</div>
<p class="Pp">A configuration with enclosure_symlinks enabled:</p>
<div class="Bd Bd-indent Li">
<pre>multipath yes
enclosure_symlinks yes

#          PCI_ID      HBA PORT     CHANNEL NAME
channel    05:00.0     1            U
channel    05:00.0     0            L
channel    06:00.0     1            U
channel    06:00.0     0            L</pre>
</div>
In addition to the disks symlinks, this configuration will create:
<div class="Bd Bd-indent Li">
<pre>/dev/by-enclosure/enc-L0
/dev/by-enclosure/enc-L1
/dev/by-enclosure/enc-U0
/dev/by-enclosure/enc-U1</pre>
</div>
<p class="Pp">A configuration using device link aliases:</p>
<div class="Bd Bd-indent Li">
<pre>#     by-vdev
#     name     fully qualified or base name of device link
alias d1       /dev/disk/by-id/wwn-0x5000c5002de3b9ca
alias d2       wwn-0x5000c5002def789e</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a href="../8/vdev_id.8.html" class="Xr">vdev_id(8)</a></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">October 8, 2024</td>
    <td class="foot-os">Debian</td>
  </tr>
</table>
</div></section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="File Formats and Conventions (5)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../7/index.html" class="btn btn-neutral float-right" title="Miscellaneous (7)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, OpenZFS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>